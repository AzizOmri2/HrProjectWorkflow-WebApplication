<!-- FrontOffice Dependencies -->
<link href="../../../../../public/FrontOffice/css/style.css" rel="stylesheet">


<!-- Offers Start -->
<div class="container-fluid py-5">
    <div class="container py-5">
        <div class="section-title text-center position-relative mb-5">
            <h6 class="d-inline-block position-relative text-secondary text-uppercase pb-2">Job Offers</h6>
            <h1 class="display-4">Find The Suitable Job Offer For You</h1>
        </div>
        <br>

        <div class="row justify-content-center bg-image mx-0 mb-5">
            <div class="col-lg-10 py-5">
                <div class="filter-section bg-white rounded shadow-sm w-100" style="max-width: 960px;">
                    <form class="row g-4 justify-content-center">
                        <!-- Search input centered in its own row -->
                        <div class="col-12 col-md-8 position-relative mx-auto">
                            <input type="text" id="searchInput" class="form-control shadow-sm rounded-pill" placeholder="Search..." [(ngModel)]="filterText" name="search" (input)="applyFilters()" aria-label="Search by title or skills"/>
                            <span class="search-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#6c757d" class="bi bi-search" viewBox="0 0 16 16">
                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85zm-5.241 0a5 5 0 1 1 0-7.071 5 5 0 0 1 0 7.07z"/>
                                </svg>
                            </span>
                        </div>

                        <!-- Experience, Skill filters and Reset button side-by-side -->
                        <div class="row select-row w-100 justify-content-center" style="margin-left:80px;">
                            <div class="col-md-10">
                                <div class="row align-items-end">
                                <!-- Experience Select -->
                                    <div class="col-md-4">
                                        <label for="experienceSelect" class="form-label fw-semibold text-muted">Experience Level</label>
                                        <select id="experienceSelect" class="form-select shadow-sm" [(ngModel)]="selectedExperience" name="experience" (change)="applyFilters()" aria-label="Select experience level">
                                            <option value="" selected>Select an Experience Level</option>
                                            <option value="Entry-level">Entry-level</option>
                                            <option value="Junior">Junior</option>
                                            <option value="Mid-level">Mid-level</option>
                                            <option value="Senior">Senior</option>
                                        </select>
                                    </div>

                                    <!-- Skills Select -->
                                    <div class="col-md-4">
                                        <label for="skillSelect" class="form-label fw-semibold text-muted">Skills</label>
                                        <select id="skillSelect" class="form-select shadow-sm" [(ngModel)]="selectedSkill" name="skill" (change)="applyFilters()" aria-label="Select skill">
                                            <option value="" selected>Select a Skill</option>
                                            <option *ngFor="let skill of availableSkills" [value]="skill">{{ skill }}</option>
                                        </select>
                                    </div>

                                    <!-- Reset Button -->
                                    <div class="col-md-4 text-end mt-3 mt-md-0">
                                        <button type="button" class="btn btn-outline-secondary px-4 fw-semibold" (click)="resetFilters()" aria-label="Reset filters">Reset Filters</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <br><br>

        <div class="row justify-content-center bg-image mx-2 mb-5">
            <div class="col-lg-12 py-5">
                <div *ngIf="offers.length === 0" class="alert alert-danger text-center">
                    There is not any job offer yet.
                </div>
                <div class="row">
                    <div class="col-md-6 col-lg-4 mb-4" *ngFor="let offer of filteredOffers">
                        <div class="card h-100 shadow-sm offer-card">
                            <div class="card-body d-flex flex-column">
                                <!-- <h5 class="card-title">{{ offer.title }}</h5> -->
                                <h5 class="card-title text-center fw-bold mb-5" style="font-size: 1.5rem;">
                                    {{ offer.title | titlecase }}
                                </h5>
                                
                                <p class="card-text" [ngSwitch]="offer.experience_level">
                                    <strong>Experience : &nbsp;</strong> 
                                    <span *ngSwitchCase="'Entry-level'" class="label label-primary">ENTRY-LEVEL</span>
                                    <span *ngSwitchCase="'Junior'" class="label label-success">JUNIOR</span>
                                    <span *ngSwitchCase="'Mid-level'" class="label label-warning">MID-LEVEL</span>
                                    <span *ngSwitchCase="'Senior'" class="label label-danger">SENIOR</span>
                                    <span *ngSwitchDefault class="label label-default">UNKNOWN</span>
                                </p>
                                <p class="card-text"><strong>Location : </strong> <i class="fa fa-map-marker"></i> {{ offer.location }}</p>
                                <p class="card-text"><strong>Skills : </strong> {{ offer.skills_required }}</p>
                                <div class="mt-auto">
                                    <a [routerLink]="[candidateId === '' ? '/frontvisiteur/offers/show' : '/front/offers/show', offer.id]" 
                                        class="btn btn-primary btn-block">
                                        Show Details
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        

    </div>
</div>
<!-- Offers End -->